inference-service:
  api-key: xxx
  endpoint: http://127.0.0.1:1234/v1 # LLM provider endpoint (OpenAI compatible)
  concurrency-limit: 1 # How many requests can be executed parallely
  timeout: 600 # Seconds we are willing to wait for the endpoint to reply with AI response
batch:
  input:
    type: INSTAGRAM_EXPORT # or WHATSAPP_EXPORT
    path: ./input/ # Path to the directory containing the exported chat files
  output:
    type: TXT # or JSON, NDJSON
    path: ./output/ # Path to the directory where the output will be written
    merge-to-one-file: true # Generate only one outout file, instead of a file for every day
    export-chat-log: false # Add the raw chat log to the output file
logs:
  level: INFO
parsing:
  # chars-per-token: How many characters is a token composed of?
  #  The tokenization efficiency varies for each language, but generally follows this hierarchy:
  #   English: ~4 chars/token
  #   Western European Languages: ~2.5 chars/token
  #   Eastern European (Cyrillic): ~1 chars/token
  #   East Asian Languages: ~1 chars/token or less
  # You can get an estimate by slamming a wikipedia article on https://platform.openai.com/tokenizer
  # (or a tokenizer specific for your model) and dividing the character count by the token count.
  chars-per-token: 4.0 # Read above
  token-per-chunk: 4000 # How many tokens worth of messages should the agent chunk together to generate a mini-summary
  chat-sessions:
    enabled: true # End the day at users sleep time instead of midnight
    sleep-window-end-hour: 9 # End of "sleep detection" window. Usually the Earliest hour of the "Goodmorning" text
    sleep-window-start-hour: 2 # Start of "sleep detection" window. Usually the Earliest hour of the "Goodnight" text
  ignore-chat:
    enabled: false # Ignore messages sent before and after these dates
    ignore-before: "1990-01-01"
    ignore-after: "2150-01-01"
  messages:
    user-interactions:
      message-like: "Ha messo \"Mi piace\" a un messaggio"
      message-reaction: "Ha aggiunto la reazione"
      call-start: "avviato una videochiamata"
    user-content:
      call-start: "[Call started]"
      call-end: "[Call ended]"
      posts-and-reels: "[Shared an internet video]"
      video-uploads: "[Sent a video of himself]"
      photo-uploads: "[Sent a photo of himself]"
      audio-messages: "[Sent an audio message]"
llm:
  max-tokens: 2000 # maximum LLM output length
  model-name: gemma-3-1b-it-qat # The LLM model to be used
  system-prompt: |-
    RUOLO: Sei un assistente esperto nella scrittura di pagine di diario personali e riflessivi.
    
    CONTESTO: Analizzerai messaggi di chat di una giornata nel formato [ora] Nome: messaggio.
    
    COMPITO PRINCIPALE: Scrivi una pagina di diario dal punto di vista di Manuel Materazzo che riassuma la sua giornata basandoti ESCLUSIVAMENTE sui messaggi forniti.
    
    ISTRUZIONI STEP-BY-STEP:
    1. Leggi attentamente tutti i messaggi
    2. Identifica i temi principali e gli eventi significativi
    3. Nota le emozioni espresse o implicite
    4. Organizza cronologicamente gli eventi
    5. Scrivi in prima persona con tono personale e riflessivo
    
    FORMATO RICHIESTO:
    - Inizia con "Caro diario,"
    - Lunghezza: 100-180 parole
    - Tono: personale, riflessivo, autentico
    - Struttura: cronologica con riflessioni personali
    - Concludi con una considerazione sulla giornata
    
    REGOLE FERREE:
    - NON inventare dettagli non presenti nei messaggi
    - USA solo informazioni esplicite o chiaramente deducibili
    - Mantieni il punto di vista di Manuel
    - Se Manuel fa una domanda, descrivi che HAI FATTO la domanda
    - Se qualcun altro fa una domanda, descrivi che HANNO FATTO la domanda a te
    - Includi emozioni solo se evidenti dal contesto
    - Ricorda che è una chat fra due fidanzati
    
    ESEMPI DI STILE:
    Input: [14:30] Manuel: Ho finalmente finito il progetto! [15:45] An: Complimenti! Come ti senti?
    [15:47] Manuel: Sollevato ma anche orgoglioso
    
    Output: Caro diario, oggi pomeriggio ho raggiunto un traguardo importante: ho finalmente completato il progetto su cui stavo lavorando. Quando An mi ha chiesto come mi sentissi, ho risposto che ero sollevato ma anche orgoglioso - e descrive perfettamente le mie emozioni. È stata una giornata di soddisfazioni personali che mi fa guardare al futuro con ottimismo.
    
    === FINE ISTRUZIONI - INIZIO MESSAGGI REALI ===
  temperature: 0.4
  top-p: 0.7
  user-prompt: |-
    MESSAGGI DA ANALIZZARE:
    {messages}

    Ora, seguendo le istruzioni step-by-step, scrivi la pagina di diario:
    === FINE MESSAGGI - INIZIO OUTPUT ===